<!DOCTYPE html>
<html>
<head>
    <title>Calendar Focus Blocker Options</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 700px; margin: auto; }
        label { display: block; margin-top: 15px; font-weight: bold; }
        input[type="text"], textarea { width: 98%; padding: 8px; font-size: 1em; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; }
        textarea { min-height: 60px; /* Smaller default height for messages */ }
        button { padding: 10px 15px; margin-top: 10px; cursor: pointer; font-size: 1em; border-radius: 4px; border: none; background-color: #4285f4; color: white; }
        button:hover { background-color: #357ae8; }
        button.delete-button { background-color: #db4437; margin-left: 10px; padding: 5px 10px; font-size: 0.9em; }
        button.delete-button:hover { background-color: #c5372c; }
        #status { margin-top: 15px; font-weight: bold; }
        .setting-group { margin-bottom: 25px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
        .help-text { font-size: 0.9em; color: #555; margin-top: 3px; }

        /* Styles for the dynamic site list */
        #sites-list { margin-top: 10px; }
        .site-entry {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 15px;
            background-color: #f9f9f9;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .site-entry-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .site-entry label { margin-top: 0; font-size: 0.95em; }
        #add-site-button { background-color: #34a853; margin-top: 15px; }
        #add-site-button:hover { background-color: #2c8f46; }
        .allowed-videos-section {
            margin-top: 15px;
            padding-top: 10px;
            border-top: 1px dashed #ccc;
            /* Initially hidden, shown by JS if YouTube is detected */
            display: none;
        }
        .allowed-videos-section label {
            font-size: 0.9em;
            font-weight: normal;
        }
        .allowed-videos-section textarea {
            min-height: 40px;
            font-family: monospace;
            font-size: 0.9em;
        }

    </style>
</head>
<body>
    <h1>Calendar Focus Blocker Options</h1>

    <!-- Enable toggle, Authorization, Focus Keyword (Keep as before) -->
     <div class="setting-group">
        <label>Enable Extension:</label>
        <input type="checkbox" id="enable-toggle">
    </div>
    <div class="setting-group">
        <label for="auth-status">Google Calendar Authorization:</label>
        <span id="auth-status">Checking...</span>
        <button id="authorize">Authorize / Re-authorize</button>
        <p class="help-text"><small>Requires read-only access to your primary calendar.</small></p>
    </div>
    <div class="setting-group">
        <label for="focusKeyword">Focus Event Keyword:</label>
        <input type="text" id="focusKeyword">
        <p class="help-text"><small>Events with this text trigger blocking (e.g., "[Focus]").</small></p>
    </div>

    <!-- == NEW DYNAMIC SITES UI == -->
    <div class="setting-group">
        <label>Blocked Websites & Custom Messages</label>
        <!-- MODIFY HELP TEXT HERE -->
        <p class="help-text">Define sites to block. Enter domains separated by commas (e.g., youtube.com, youtu.be) to apply the same message to multiple sites. If no custom message is set, the global message is used.</p>
        <div id="sites-list">
            <!-- Site entries will be loaded here -->
        </div>
        <button id="add-site-button">+ Add Site Entry</button>
    </div>
    <!-- ... -->

    <!-- ============================ -->

    <div class="setting-group">
        <label for="globalBlockMessageInput">Global Block Message (Fallback HTML)</label>
        <textarea id="globalBlockMessageInput"></textarea>
         <p class="help-text">This HTML message is shown for blocked sites without a specific custom message.</p>
    </div>

    <button id="save">Save All Settings</button>
    <div id="status"></div>


    <!-- Hidden Template for Site Entries -->
    <template id="site-entry-template">
        <div class="site-entry">
            <div class="site-entry-header">
                 <!-- MODIFY LABEL HERE -->
                 <label>Website Domain(s) (comma-separated):</label>
                 <button class="delete-button">Delete</button>
            </div>
             <!-- MODIFY PLACEHOLDER HERE -->
            <input type="text" class="site-domain" placeholder="e.g., youtube.com, youtu.be, facebook.com">
            <label>Custom HTML Message (Optional):</label>
            <textarea class="site-message" placeholder="e.g., Let's be <b>PRODUCTIVE</b>!"></textarea>

            <!-- ** NEW: Allowed Videos Section ** -->
            <div class="allowed-videos-section">
                <label for="allowed-videos">Allowed YouTube Video IDs (one per line):</label>
                <textarea class="allowed-videos" placeholder="dQw4w9WgXcQ
kfchvCyHmsc"></textarea>
                <p class="help-text"><small>Only applies if 'youtube.com' or 'youtu.be' is listed above.</small></p>
            </div>
            <!-- ****************************** -->
            
        </div>
    </template>
    <!-- ... -->

    <script src="options.js"></script>
</body>
</html>